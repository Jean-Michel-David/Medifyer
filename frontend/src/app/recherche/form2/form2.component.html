<div @insertTrigger class="form-part bg-light p-4 rounded" [formGroup]="secondPart">
  <button class="btn btn-helha btn-help" type="button" data-bs-toggle="collapse" data-bs-target="#collapseForm2" aria-expanded="false" aria-controls="collapse">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>
  </button>
  <div class="collapse" id="collapseForm2">
    <div class="card card-body bg-dark text-white d-block">
      <button class="btn-close btn-close-white float-end" type="button" data-bs-toggle="collapse" data-bs-target="#collapseForm2" aria-expanded="false" aria-controls="collapse"></button>
      Nous allons maintenant nous servir des reponses aux precedentes question afin de determiner quels mots cles nous devrons utiliser afin de trouver des articles correspondants a notre question de recherche. <br>
      <br>
      Commencons par ajouter un nouveau mot en francais dans "Langage Naturel" de la partie Patient / Population / Pathologie. <br>
      <br>
      Une fois le mot entre, appuyez sur le bouton "HeTop" afin de chercher la traduction en terme Mesh de ce mot. <br>
      <br>
      Ajoutez un nouveau mot a "Termes Mesh" de la partie Patient / Population / Pathologie. <br>
      <br>
      Apres avoir cliquer en dehors du champ texte, si le mot est bien un terme Mesh, une icone vous confirmera sa validite. <br>
      <br>
      Si un symbole rouge apparait, le mot ne fait pas partie des termes Mesh de PubMed. <br>
      <br>
      Vous pouvez corriger cette erreur ou alors, si vous voulez garder ce mot, vous pouvez appuyer sur la fleche afin de l'ajouter aux Synonymes. <br>
      <br>
      Repetez l'operation pour les autres parties.<br>
      <br>
      Apres avoir rempli tous vos termes, passez a la partie suivante.<br>
    </div>
  </div>
  <div class="form-group" *ngFor="let group of groups; let j=index;">
    <hr class="hr" *ngIf="j != 0"/>
    <label>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" *ngIf="formGroups[j] == 'patient'"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M48 48h88c13.3 0 24-10.7 24-24s-10.7-24-24-24H32C14.3 0 0 14.3 0 32V136c0 13.3 10.7 24 24 24s24-10.7 24-24V48zM175.8 224a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm-26.5 32C119.9 256 96 279.9 96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3zm368 80c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6h56.1zm-89.4 0c-8.6-24.3-29.9-42.6-55.9-47c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24zM464 224a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm-80-32a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM504 48h88v88c0 13.3 10.7 24 24 24s24-10.7 24-24V32c0-17.7-14.3-32-32-32H504c-13.3 0-24 10.7-24 24s10.7 24 24 24zM48 464V376c0-13.3-10.7-24-24-24s-24 10.7-24 24V480c0 17.7 14.3 32 32 32H136c13.3 0 24-10.7 24-24s-10.7-24-24-24H48zm456 0c-13.3 0-24 10.7-24 24s10.7 24 24 24H608c17.7 0 32-14.3 32-32V376c0-13.3-10.7-24-24-24s-24 10.7-24 24v88H504z"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" *ngIf="formGroups[j] == 'intervention'"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M112 96c-26.5 0-48 21.5-48 48V256h96V144c0-26.5-21.5-48-48-48zM0 144C0 82.1 50.1 32 112 32s112 50.1 112 112V368c0 61.9-50.1 112-112 112S0 429.9 0 368V144zM554.9 399.4c-7.1 12.3-23.7 13.1-33.8 3.1L333.5 214.9c-10-10-9.3-26.7 3.1-33.8C360 167.7 387.1 160 416 160c88.4 0 160 71.6 160 160c0 28.9-7.7 56-21.1 79.4zm-59.5 59.5C472 472.3 444.9 480 416 480c-88.4 0-160-71.6-160-160c0-28.9 7.7-56 21.1-79.4c7.1-12.3 23.7-13.1 33.8-3.1L498.5 425.1c10 10 9.3 26.7-3.1 33.8z"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" *ngIf="formGroups[j] == 'resultats'"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M32 32c17.7 0 32 14.3 32 32V400c0 8.8 7.2 16 16 16H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-44.2 0-80-35.8-80-80V64C0 46.3 14.3 32 32 32zM160 224c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V256c0-17.7 14.3-32 32-32zm128-64V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V160c0-17.7 14.3-32 32-32s32 14.3 32 32zm64 32c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V224c0-17.7 14.3-32 32-32zM480 96V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V96c0-17.7 14.3-32 32-32s32 14.3 32 32z"/></svg>
      <h5>{{group}}</h5>
    </label>
    <div class="column-group" formGroupName="{{formGroups[j]}}">
      <div class="column" formArrayName="natural">
        <h6 class="fw-bold">Langage Naturel (FR)</h6>
        <p *ngIf="($any(secondPart.controls[formGroups[j]]).controls['natural']).length == 0">Vide</p>
        <div *ngFor="let term of ($any(secondPart.controls[formGroups[j]]).controls['natural']).controls; let i=index" class="natural">
          <input class="form-control"
          id="termNatural-{{ i }}"
          type="text"
          formControlName="{{i}}"
          (focusout)="checkEmptyWhenLeaving($event,formGroups[j],'natural',i)"
          (keydown.enter)="loseFocus($event)">
          <a href="https://www.hetop.eu/hetop/fr/?q=&home#q={{($any(secondPart.controls[formGroups[j]]).controls['natural']).at(i).value}}" target="_blank" class="btn btn-hetop">
            HeTop
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M384 32c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96C0 60.7 28.7 32 64 32H384zM320 313.4V176c0-8.8-7.2-16-16-16H166.6c-12.5 0-22.6 10.1-22.6 22.6c0 6 2.4 11.8 6.6 16L184 232l-66.3 66.3C114 302 112 306.9 112 312s2 10 5.7 13.7l36.7 36.7c3.6 3.6 8.5 5.7 13.7 5.7s10-2 13.7-5.7L248 296l33.4 33.4c4.2 4.2 10 6.6 16 6.6c12.5 0 22.6-10.1 22.6-22.6z"/></svg>
          </a>
        </div>
        <button type="button" class="btn btn-dark" (click)="addTerm(formGroups[j],'natural')" *ngIf="checkIfEmpty('natural',formGroups[j])">+ Ajouter un nouveau mot</button>
      </div>
      <div class="column" formArrayName="mesh">
        <h6 class="fw-bold">Terme Mesh (EN)</h6>
        <p *ngIf="($any(secondPart.controls[formGroups[j]]).controls['mesh']).length == 0">Vide</p>
        <div class="mesh" *ngFor="let term of ($any(secondPart.controls[formGroups[j]]).controls['mesh']).controls; let i=index">
          <input class="form-control"
          id="term-{{ i }}"
          type="text"
          formControlName="{{i}}"
          (focusout)='checkMeshTerm($event,formGroups[j],i)'
          (keydown.enter)="loseFocus($event)"
          #mesh >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" *ngIf="mesh.classList.contains('valid')"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
          <button *ngIf="mesh.classList.contains('notvalid')" (click)="moveTerm($event,formGroups[j],i)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM281 385c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l71-71L136 280c-13.3 0-24-10.7-24-24s10.7-24 24-24l182.1 0-71-71c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L393 239c9.4 9.4 9.4 24.6 0 33.9L281 385z"/></svg>
            <div class="card border-0 bg-dark card-hover">
              <div class="bubble bg-dark"></div>
              <div class="card-body">
                Ajouter aux synonmes
              </div>
            </div>
          </button>

        </div>
        <button type="button" class="btn btn-dark" (click)="addTerm(formGroups[j],'mesh')" *ngIf="checkIfEmpty('mesh',formGroups[j])">+ Ajouter un nouveau mot</button>
      </div>
      <div class="column" formArrayName="synonym">
        <h6 class="fw-bold">Synonyme (EN)</h6>
        <p *ngIf="($any(secondPart.controls[formGroups[j]]).controls['synonym']).length == 0">Vide</p>
        <input *ngFor="let term of ($any(secondPart.controls[formGroups[j]]).controls['synonym']).controls; let i=index"
        class="form-control"
        id="termSynonym-{{ i }}"
        type="text"
        formControlName="{{i}}"
        (focusout)='checkEmptyWhenLeaving($event,formGroups[j],"synonym",i)'
        (keydown.enter)="loseFocus($event)">
        <button type="button" class="btn btn-dark" (click)="addTerm(formGroups[j],'synonym')" *ngIf="checkIfEmpty('synonym',formGroups[j])">+ Ajouter un nouveau mot</button>
      </div>
    </div>
  </div>
</div>
